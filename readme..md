# PrivateCloud_Chaos_Engineering

## 개요라기보단 낙서장 
우선 홈서버를 구축하려고 한다. 취미 느낌이 아니기에 프라이빗클라우드라고 명칭했다. 
여기에 시스템엔지니어 취업공고에 자주 나오는 키워드인 쿠버네티스, 도커, 가상화 뭐 이런걸 도입하려 한다.
여기까지가 환경세팅 정도로 이후에 카오스엔지니어링을 하려 한다. 
일부러 장애를 내보고 어떤 상황인데 어떠한 근거로 여기가 문제인것 같고 여러 해결방안 중에 이런걸 시도해봤고 추후에는 이런 식으로 재발방지까지 했다. 이런거를 깃허브에 문서화를 해서 한 대표적인 장애 10가지에 대해 해보고 포폴에는 그중에 특히 중요하고 할얘기 많은 2~3개를 추려서 정리하는 식으로 하면 어떨까? 
그냥 어차피 중간에 한국 갈거 같으니까 그냥 지금 홈서버 관련 장비 사버려삐?

하지만 지금 사는건 그러니까 2월달에 발표 끝나고 한국가서 만들자. 
그리고 메인컴1개에 라즈베리파이 4개 사서 각각에 도커 컨테이너 올려서 분산환경을 구축한 다음에 
쿠버네티스로 관리하는 방법까지 공부해두자. 

서버 어떤식으로 구성할지 미리 모식도를 그려놓고 도커랑 쿠버네티스 좀 만져보는 거를 미리 해놔야할듯? 강의라도 들어볼까.

결론 : 일단 코딩애플 docker 강의 들은 다음에 쿠버네티스 강의 찾아서 들으면서 공부하고 홈서버 견적 내서 어떻게 할지 짜놓고 한국가서 바로 실습 가능하게 세팅쫙 하고 실험하는 느낌쓰. 
그리고 어떤 장애를 할건지를 미리 해놓자. 그래야 목표가 보이고 힘낼 수 있을거 같음. 간단한거 3개,중간정도3개 고급3개 이런식으로 9개 하고 정리글 쓰는거 어때.이때 말한대로 각 케이스마다 현재상황과 근거에 의거해서 이러한 정보를 모았고 이런식으로 유추하면 여기가 문제고 어떤식으로 대처했고 재발방지는 어떤식으로 했다 이런걸 형식으로 맞춰서 풀어쓰면 될거 같은데 

***
어쩃든 단순히 이런 문제를 가정하고 하는거보다 뭔가를 서비스를 만들고(진짜 간단한 거도 괜찮음) 배포하고 실제로 많은 사람들이 사용하지 않더라도 이러한 경우를 대비해 이런식으로 서버를 구축했다 이런걸 보여주면 좋을거 같긴 한데 
그러면 실제로 웹서버를 구축하고 애를 배포한다고 가정하고 만들어볼까...


아니, 실제 서비스를 만드는건 살짝 개빡일 뿐더러 현실적으로 만드는게 좋다고는 해도 단체 프로젝트가 아닌 이상 빡셈. 그러니 차라리 내가 미리 서버쪽을 구성해놓고 만약에 서버가 필요하다는 사람이 있으면 그때 협업하는 식으로 하는게 나을듯.
현재로서는 그..덕중이형이랑 하던 게임api를 나 혼자라도 구성하는 식으로 하는게 나을듯? 어차피 api통신은 어느정도 구현이 되있으니까 이걸 docker랑 쿠버네티스 환경에서 구축하는거지.

그러면 지금 내 상황에서 해야할거는 db나api서버나 그런걸 도커 환경에서 구축해놓고, 그걸 나중에는 라즈베리파이에 각 도커 컨테이너를 분산시킨 다음에, 그 분산된 컨테이너를 장애대응이나 컨트롤같은걸 하기 위해 쿠버네티스를 적용하고, 그다음에 만약에 게임이 업데이트 됐을때 도커나 깃이나 그런걸 자동배포 하도록 CI/CD를 구축하고,,이런식으로 하면 될듯? 

```
                     ┌───────────────────────────┐
                     │        Developer          │
                     │     (코드 Push)           │
                     └─────────────┬─────────────┘
                                   │
                                   ▼
                        ┌───────────────────┐
                        │  GitHub Actions   │
                        │  (CI/CD Pipeline) │
                        └─────────┬─────────┘
                                  │
                              Build / Test
                                  │
                                  ▼
                        ┌───────────────────┐
                        │    Docker Hub     │
                        │(컨테이너 이미지 저장)│
                        └─────────┬─────────┘
                                  │ Pull
                                  ▼
                   ┌─────────────────────────────┐
                   │   Kubernetes Cluster        │
                   │   (메인 서버 + 라즈베리파이) │
                   └─────────────┬───────────────┘
                                 │
                 ┌───────────────┴─────────────────┐
                 │                                 │
        ┌───────────────────┐             ┌───────────────────┐
        │    메인 서버       │             │   라즈베리파이 #1~5│
        │───────────────────│             │───────────────────│
        │ • Redis(DB)       │             │ • FastAPI Game Pod │
        │ • Prometheus      │             │ • Node Exporter    │
        │ • Grafana         │             │ • Promtail (Logs)  │
        │ • Loki            │             │ • Nginx Ingress     │
        └───────────────────┘             └───────────────────┘
                                 │
                                 ▼
                       ┌─────────────────┐
                       │   게임 클라이언트 │
                       │ (유니티, 플레이어)│
                       └─────────────────┘
```

📋 홈서버 구축 로드맵
Phase 1: 기초 환경 구축 (1~2주) 🚀
┌─ 1.1) EC2 Docker 환경 세팅
│   └─ Docker, Docker Compose 설치
│   └─ 보안그룹 설정 (포트 허용)
│
├─ 1.2) 현재 애플리케이션 정리
│   └─ main.py 개선 (로깅, 에러 핸들링)
│   └─ requirements.txt 최종 확인
│   └─ Dockerfile 최적화
│
└─ 1.3) Docker 로컬 테스트
    └─ docker-compose.yml으로 main_server + redis 실행
    └─ websocket 통신 확인

Phase 2: 모니터링 & 로깅 기초 (2~3주) 📊
├─ 2.1) Prometheus 설정
│   └─ 애플리케이션 메트릭 수집 (CPU, 메모리, 요청수)
│   └─ Redis 메트릭 모니터링
│
├─ 2.2) Grafana 대시보드
│   └─ 실시간 성능 모니터링
│   └─ 알림 규칙 설정
│
└─ 2.3) Loki + Promtail (로그 수집)
    └─ 애플리케이션 로그 수집
    └─ 중앙 집중식 로그 관리

Phase 3: Kubernetes 학습 (3~4주) ☸️
├─ 3.1) 개념 학습 (온라인 강의)
│   └─ Pod, Service, Deployment, StatefulSet
│   └─ Namespace, ConfigMap, Secret
│
├─ 3.2) 로컬 테스트 (Minikube)
│   └─ Kubernetes 클러스터 로컬 구축
│   └─ 간단한 앱 배포 및 스케일링 테스트
│
└─ 3.3) Manifest 파일 작성
    └─ main-server Deployment
    └─ redis StatefulSet
    └─ Service, Ingress 설정
Phase 4: CI/CD 파이프라인 (2주) 🔄
├─ 4.1) GitHub Actions 설정
│   └─ 코드 푸시 → 자동 빌드 → 테스트
│
├─ 4.2) Docker Hub 연동
│   └─ 빌드된 이미지 자동 업로드
│
└─ 4.3) 자동 배포 (ArgoCD or Flux)
    └─ Kubernetes에 자동 배포
    └─ 롤백 기능
Phase 5: 라즈베리파이 통합 (2월 이후) 🍓
├─ 5.1) 라즈베리파이 셋업 (3대)
│   └─ Raspberry Pi OS 설치
│   └─ Docker 설치
│   └─ 정적 IP 설정
│
├─ 5.2) Kubernetes 클러스터 확장
│   └─ 메인서버: Control Plane (마스터)
│   └─ 라즈베리파이 3대: Worker Nodes
│   └─ kubeadm으로 조인
│
└─ 5.3) 분산 구성 검증
    └─ Pod이 여러 노드에 분산되는지 확인
    └─ 노드 간 통신 테스트
Phase 6: 고급 기능 (1개월) ⚙️
├─ 6.1) Persistent Storage
│   └─ Redis 데이터 백업
│   └─ NFS, Local Storage 설정
│
├─ 6.2) 네트워킹
│   └─ Istio (Service Mesh)
│   └─ 트래픽 관리
│
└─ 6.3) 보안
    └─ Pod Security Policies
    └─ Network Policies
Phase 7: 카오스 엔지니어링 (1.5개월) 🔥
├─ 7.1) 간단한 장애 시나리오 (3개)
│   └─ Pod 강제 종료 → 자동 복구 확인
│   └─ 네트워크 지연 주입 → 응답 시간 확인
│   └─ 메모리 부족 시뮬레이션
│
├─ 7.2) 중간 난이도 (3개)
│   └─ 노드 다운 → 다른 노드로 마이그레이션
│   └─ DB 연결 끊김 → 서킷브레이커 동작
│   └─ 높은 트래픽 → 자동 스케일링
│
├─ 7.3) 고급 시나리오 (3개)
│   └─ 분할된 네트워크 (Split Brain)
│   └─ Cascading Failure (연쇄 장애)
│   └─ 데이터 일관성 테스트
│
└─ 7.4) 문서화
    └─ 각 시나리오마다 분석 글 작성
    └─ GitHub에 케이스 스터디 업로드
├─ README 작성
│   └─ 아키텍처 다이어그램
│   └─ 각 기술 설명
│
├─ 블로그 글 (2~3개)
│   └─ 가장 인상적인 장애 사례
│   └─ 배운 점과 해결책
│
└─ GitHub 구성
    └─ Clean한 커밋 이력
    └─ 상세한 이슈/PR 설명